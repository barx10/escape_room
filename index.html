<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Operasjon Avsl√∏ring - Den Kalde Krigen Escape Room</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Landing Page -->
    <div id="landingPage" class="landing-page">
        <div class="landing-content">
            <div class="classified-banner">
                <span class="red-stamp">TOP SECRET</span>
                <span class="classified-text">‚ö†Ô∏è KLASSIFISERT DOKUMENT ‚ö†Ô∏è</span>
                <span class="red-stamp">TOP SECRET</span>
            </div>
            
            <h1 class="landing-title">OPERASJON AVSL√òRING</h1>
            <div class="subtitle">Den Kalde Krigen - Digital Escape Room</div>
            
            <!-- Oppdragsbriefing er flyttet til briefing.html -->
            
            <div class="mission-stats">
                <div class="stat-item" onclick="openRoomsModal()" role="button" tabindex="0" aria-label="Vis romliste">
                    <div class="stat-number">11</div>
                    <div class="stat-label">Rom √• L√∏se</div>
                </div>
                <div class="stat-item" onclick="openInfoModal('Tid', '<p>Tiden starter i det oppdraget starter ‚Äî enten fra briefing-siden n√•r du klikker Fortsett eller ved √• √•pne oppdraget direkte. Hold √∏ye med timeren √∏verst til h√∏yre.</p>')" role="button" tabindex="0" aria-label="Vis tid-info">
                    <div class="stat-number">60</div>
                    <div class="stat-label">Minutter Tid</div>
                </div>
                <div class="stat-item" onclick="openInfoModal('Mulige feil', '<p>Du kan gj√∏re feil underveis uten √• automatisk miste oppdraget. Feil gir ofte ledetr√•der eller stopper fremdrift, men timeren fortsetter. Oppfordre til samarbeid og refleksjon.</p>')" role="button" tabindex="0" aria-label="Vis info om mulige feil">
                    <div class="stat-number">‚àû</div>
                    <div class="stat-label">Mulige Feil</div>
                </div>
            </div>
            
            <a href="briefing.html" class="start-mission-btn">
                <span class="btn-text">üöÄ START OPPDRAGET</span>
            </a>
            
            <div class="footer-note footer-with-logo">
                <p>üìö Dette er et l√¶ringsspill om den kalde krigen</p>
                <p>Utviklet av L√¶rerliv, 2025.</p>
                <a href="https://laererliv.no" target="_blank" rel="noopener">
                    <img src="assets/images/laererliv-logo.png" alt="L√¶rerliv logo" class="footer-logo">
                </a>
            </div>
        </div>
        
        <div class="background-animation">
            <div class="globe"></div>
            <div class="grid-lines"></div>
        </div>
    </div>

    <!-- Rooms Modal -->
    <div id="roomsModal" class="modal" aria-hidden="true">
        <div class="modal-content">
            <button class="modal-close" onclick="closeRoomsModal()" aria-label="Lukk">‚úï</button>
            <h2>Rom i oppdraget</h2>
            <ul class="room-list">
                <li>1 ‚Äî Etterkrigstiden (1946‚Äì47)</li>
                <li>2 ‚Äî Oppbygging av allianser (1949/1955)</li>
                <li>3 ‚Äî Berlinmuren (1961)</li>
                <li>4 ‚Äî Cubakrisen (1962)</li>
                <li>5 ‚Äî Arkivdokumenter (oktober 1962)</li>
                <li>6 ‚Äî Avlyttede meldinger</li>
                <li>7 ‚Äî Tidsberegning & kodeknusing</li>
                <li>8 ‚Äî Forhandlingene</li>
                <li>9 ‚Äî Sende bevisene</li>
                <li>10 ‚Äî Avslutning og refleksjon</li>
            </ul>
            <div style="text-align: right; margin-top: 12px;">
                <a href="briefing.html" class="btn">Start oppdraget</a>
            </div>
        </div>
    </div>

    <!-- Info Modal (reusable) -->
    <div id="infoModal" class="modal" aria-hidden="true">
        <div class="modal-content">
            <button class="modal-close" onclick="closeInfoModal()" aria-label="Lukk">‚úï</button>
            <h2 id="infoTitle">Info</h2>
            <div id="infoBody"></div>
        </div>
    </div>

    <!-- Game Container (hidden initially) -->
    <div class="container" id="gameContainer" style="display: none;">
        <header class="header">
            <div class="classified-stamp">üîí HEMMELIG DOKUMENT üîí</div>
            <h1>OPERASJON AVSL√òRING</h1>
            <p>Den Kalde Krigen - Digital Escape Room</p>
            <div class="timer" id="timer">‚è∞ Tid igjen: 60:00</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress"></div>
            </div>
        </header>

        <div id="roomsContainer"></div>
    </div>

    <!-- Fixed back button; hidden until game starts -->
    <a href="#" id="fixedBackBtn" class="fixed-back-btn" aria-label="Avbryt oppdrag" style="display:none;" onclick="cancelMission(); return false;">Avbryt oppdrag</a>

    <script type="module" src="game.js"></script>
    <script>
        function openRoomsModal() {
            const m = document.getElementById('roomsModal');
            m.style.display = 'block';
            m.setAttribute('aria-hidden', 'false');
        }
        function closeRoomsModal() {
            const m = document.getElementById('roomsModal');
            m.style.display = 'none';
            m.setAttribute('aria-hidden', 'true');
        }
        function openInfoModal(title, html) {
            const m = document.getElementById('infoModal');
            document.getElementById('infoTitle').innerText = title;
            document.getElementById('infoBody').innerHTML = html;
            m.style.display = 'block';
            m.setAttribute('aria-hidden', 'false');
        }
        function closeInfoModal() {
            const m = document.getElementById('infoModal');
            m.style.display = 'none';
            m.setAttribute('aria-hidden', 'true');
        }
        // close modal on ESC
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') closeRoomsModal();
        });
        // close when clicking outside modal content
        document.getElementById('roomsModal').addEventListener('click', function(e) {
            if (e.target === this) closeRoomsModal();
        });
        document.getElementById('infoModal').addEventListener('click', function(e) {
            if (e.target === this) closeInfoModal();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98fecaa602630731',t:'MTc2MDY5MzU3Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98fecaa602630731',t:'MTc2MDY5MzU3Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
